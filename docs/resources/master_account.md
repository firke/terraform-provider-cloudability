# Master Account Resource

This resource is used to connect an AWS master account to Cloudability to support the integration and ingestion of data from that account. 

You don't have to manage this resource. If you already have a master account created and linked to Cloudability you may not need to manage it with terraform. However if you want to create linked accounts and immediately managed them in terraform then you need to update cloudability with the new linked account details prior to managing a linked account via terraform. This can be done via the master account datasource. 

## Example Usage

```hcl
resource "cloudability_master_account" "aws_payer_account" {
    vendor_account_id = var.aws_payer_account_id
    bucket_name = aws_s3_bucket.cloudability.bucket
    report_name = "Cloudability"
    report_prefix = "CostAndUsageReports"
}

data "cloudability_account_verification" "aws_payer_account" {
    vendor_account_id = var.aws_payer_account_id
    dependency = module.cloudability_aws_iam_role.role_id
}
```

## Argument Reference

* `vendor_account_name` - (Optional) The name give to your AWS account
* `vendor_account_id` - (Required) 12 digit string corresponding to your AWS account ID
* `type` - (Optional) Defaults to aws_role --- aws_user untested
* `bucket_name` - (Required) Name of s3 bucket containing cost usage reports
* `report_name` - (Required) Name of cost and usage report"
* `report_prefix` - (Required) Cost and usage report prefix

## Attribute Reference

* `vendor_account_name` - The name give to your AWS account
* `vendor_account_id` - 12 digit string corresponding to your AWS account ID
* `vendor_key` - Hardcoded to "aws"
* `verification` - Object containing details of verification state
- * `state` - examples "unverified", "verified", "error"
- * `last_verification_attempted_at` - date timestamp, example: "1970-01-01T00:00:00.000Z"
- * `message` - error message for credentials in error state
* `authorization` -  object contain vendor specific authorization details
- * `type` - "aws_role" or "aws_user"
- * `role_name` - currently hardcoded to "CloudabilityRole"
- * `external_id` - the external ID used to prevent confused deputies. Generated by Cloudability
* `external_id` - the external ID used to prevent confused deputies. Generated by Cloudability
* `parent_account_id` - 12 digit string representing parent's account ID (if current cred is a linked account)
* `created_at` - date timestamp corresponding to cloudability credential creation time
* `bucket_name` - Name of s3 bucket containing cost usage reports
* `report_name` - Name of cost and usage report"
* `report_prefix` - Cost and usage report prefix
