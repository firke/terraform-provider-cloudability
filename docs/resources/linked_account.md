# Linked Account Resource

This resource is used to connect an AWS linked account to Cloudability to support the integration and ingestion of data from that account. 

If your linked account is brand new, make sure Cloudability is aware of it by updated the master account data sources. We do have a regular background job to register new accounts, but if your account is brand, update the master account datasource to guarantee the linked account can be created.

## Example Usage

```hcl
data "cloudability_account_verification" "aws_payer_account" {
    vendor_account_id = var.aws_payer_account_id
}

resource "cloudability_linked_account" "aws_account" {
    vendor_account_id = var.aws_account_id
    depends_on = [
        data.cloudability_account_verification.aws_payer_account,
    ]
}
```

## Argument Reference

* `vendor_account_name` - (Optional) The name give to your AWS account
* `vendor_account_id` - (Required) 12 digit string corresponding to your AWS account ID

## Attribute Reference

* `vendor_account_name` - The name give to your AWS account
* `vendor_account_id` - 12 digit string corresponding to your AWS account ID
* `vendor_key` - Hardcoded to "aws"
* `verification` - Object containing details of verification state
- * `state` - examples "unverified", "verified", "error"
- * `last_verification_attempted_at` - date timestamp, example: "1970-01-01T00:00:00.000Z"
- * `message` - error message for credentials in error state
* `authorization` -  object contain vendor specific authorization details
- * `type` - "aws_role" or "aws_user"
- * `role_name` - currently hardcoded to "CloudabilityRole"
- * `external_id` - the external ID used to prevent confused deputies. Generated by Cloudability
* `external_id` - the external ID used to prevent confused deputies. Generated by Cloudability
* `parent_account_id` - 12 digit string representing parent's account ID (if current cred is a linked account)
* `created_at` - date timestamp corresponding to cloudability credential creation time
